<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="style.css">
	<!-- ボタンCSSの参照先 http://www.htmq.com/csskihon/004.shtml -->
	<style type="text/css">
		.square_btn{
			display: inline-block;
			padding: 0.5em 1em;
			text-decoration: none;
			background: #668ad8;/*ボタン色*/
			color: #FFF;
			border-bottom: solid 4px #627295;
			border-radius: 3px;
		}
		.square_btn:active {/*ボタンを押したとき*/
			-ms-transform: translateY(4px);
			-webkit-transform: translateY(4px);
			transform: translateY(4px);/*下に動く*/
			border-bottom: none;/*線を消す*/
		}
	</style>
	<title>今年の運勢おみくじ</title>
</head>
<body>
<h1>今年の運勢おみくじ</h1>

<script>
var no_rare = 0;//大吉
var no_arare = 0;//中吉
var no_brare = 0;//小吉
var no_crare = 0;//吉
var no_drare = 0;//末吉
var no_erare = 0;//凶
var no_frare = 0;//大凶

function gatcha() {
	var img = document.getElementById("card"); 
	var number = Math.floor(100*Math.random());
	if( number < 22 ) {
		alert("今年は良い年になるかも！");
		img.src = "https://3.bp.blogspot.com/-vQSPQf-ytsc/T3K7QM3qaQI/AAAAAAAAE-s/6SB2q7ltxwg/s1600/omikuji_daikichi.png";
		no_rare++;
	} else if( number < 30 ) {
		img.src = "https://3.bp.blogspot.com/-_z-n-7gO3KA/T3K7MU3MdGI/AAAAAAAAE-k/8qs-jxqS4LE/s1600/omikuji_chuukichi.png";
		no_arare++;
	} else if( number < 43 ) {
		img.src = "https://3.bp.blogspot.com/-nZt5pjGWT9E/T3K7TJ4wEZI/AAAAAAAAE_E/c1X2-N54EYo/s1600/omikuji_syoukichi.png";
		no_brare++;
	} else if( number < 71 ) {
		img.src = "https://2.bp.blogspot.com/-27IG0CNV-ZE/VKYfn_1-ycI/AAAAAAAAqXw/fr6Y72lOP9s/s800/omikuji_kichi.png";
		no_crare++;
	} else if( number < 86 ) {
		img.src = "https://3.bp.blogspot.com/-JLNa8mwZRnU/T3K7StR-bEI/AAAAAAAAE-8/rQrDomz5MSw/s1600/omikuji_suekichi.png";
		no_drare++;
	} else if( number < 99 ) {
		img.src = "https://4.bp.blogspot.com/-qCfF4H7YOvE/T3K7R5ZjQVI/AAAAAAAAE-4/Hd1u2tzMG3Q/s1600/omikuji_kyou.png";
		no_erare++;
	} else {
		alert("努力あるのみ"); 
		img.src = "https://2.bp.blogspot.com/-h61ngruj0tE/T3K7RDUWmPI/AAAAAAAAE-0/KXtPY8fDwco/s1600/omikuji_daikyou.png";
		no_frare++;
	}
	var total = no_rare + no_arare + no_brare + no_crare + no_drare + no_erare + no_frare;
	document.getElementById("price").innerHTML = total*300+"円";
	document.getElementById("no_rare").innerHTML = no_rare+"枚（確率"+Math.round(no_rare/total*100*100)/100+"％）";
	document.getElementById("no_arare").innerHTML = no_arare+"枚（確率"+Math.round(no_arare/total*100*100)/100+"％）";
	document.getElementById("no_brare").innerHTML = no_brare+"枚（確率"+Math.round(no_brare/total*100*100)/100+"％）";
	document.getElementById("no_crare").innerHTML = no_crare+"枚（確率"+Math.round(no_crare/total*100*100)/100+"％）";
	document.getElementById("no_drare").innerHTML = no_drare+"枚（確率"+Math.round(no_drare/total*100*100)/100+"％）";
	document.getElementById("no_erare").innerHTML = no_erare+"枚（確率"+Math.round(no_erare/total*100*100)/100+"％）";
	document.getElementById("no_frare").innerHTML = no_frare+"枚（確率"+Math.round(no_frare/total*100*100)/100+"％）";
}
</script>

<div><img id="card" src="unknown.png" width="300" height="400"></div>

<div><a href="#" class="square_btn" onclick="gatcha()">引く！</a></div>

<dl>
	<dt>現在の課金額</dt>
	<dd id="price">0円</dd>
	<dt>大吉の枚数（設定確率は22％）</dt>
	<dd id="no_rare">0枚</dd>
	<dt>中吉の枚数（設定確率は8％）</dt>
	<dd id="no_arare">0枚</dd>
	<dt>小吉の枚数（設定確率は13％）</dt>
	<dd id="no_brare">0枚</dd>
	<dt>吉の枚数（設定確率は28％）</dt>
	<dd id="no_crare">0枚</dd>
	<dt>末吉の枚数（設定確率は15％）</dt>
	<dd id="no_drare">0枚</dd>
	<dt>凶の枚数（設定確率は13％）</dt>
	<dd id="no_erare">0枚</dd>
	<dt>大凶の枚数（設定確率は1％）</dt>
	<dd id="no_frare">0枚</dd>
</dl>

</body>
</html>

